# GaugeRewarder Claim Guide

This guide explains how users can claim their rewards from the `GaugeRewarder` contract. It includes the necessary steps, prerequisites, and important details regarding the claim process.

## Overview
The `GaugeRewarder` contract allows users to claim rewards they have earned. To do so, the user needs a valid signature generated by the backend, which authenticates the claim. Users can either call the `claim` function themselves or have an authorized account call the `claimFor` function on their behalf.

## Claiming Rewards
There are two main methods available for claiming rewards from the `GaugeRewarder` contract:

### 1. `claim` Method
The `claim` method allows users to claim their rewards directly. Users need a valid signature from the backend to proceed with the claim. Below is a description of how to use the `claim` method.

```solidity
/**
 * @notice Claims rewards for the caller.
 * @param totalAmount_ The total amount of reward being claimed.
 * @param deadline_ The expiration time of the claim.
 * @param signature_ The signature authorizing the claim.
 * @return The amount of reward claimed.
 */
function claim(uint256 totalAmount_, uint256 deadline_, bytes memory signature_) external returns (uint256);
```

- **Parameters**:
  - `totalAmount_`: The total reward amount that the user is entitled to claim for all time. This value is provided in the signature.
  - `deadline_`: The deadline (in Unix timestamp format) by which the user must make the claim. After this time, the signature will no longer be valid.
  - `signature_`: A cryptographic signature that validates the user's entitlement to the specified reward amount. This signature must be generated by the backend.

- **Steps to Claim**:
  1. Ensure you have received the signature from the backend.
  2. Call the `claim` method on the `GaugeRewarder` contract, passing in the `totalAmount_`, `deadline_`, and `signature_` parameters.
  3. If the claim is successful, the specified reward amount will be transferred to your address.

### 2. `claimFor` Method
The `claimFor` method allows an authorized account to claim rewards on behalf of another user. This can be useful in scenarios where a user cannot interact directly with the contract.

```solidity
/**
 * @notice Claims rewards on behalf of a specified target address.
 * @param target_ The address of the recipient of the claimed reward.
 * @param totalAmount_ The total amount of reward being claimed.
 * @param deadline_ The expiration time of the claim.
 * @param signature_ The signature authorizing the claim.
 * @return The amount of reward claimed.
 */
function claimFor(address target_, uint256 totalAmount_, uint256 deadline_, bytes memory signature_) external returns (uint256);
```

- **Parameters**:
  - `target_`: The address of the user for whom the rewards are being claimed.
  - `totalAmount_`, `deadline_`, and `signature_`: These parameters are the same as those used in the `claim` method.

- **Steps to Claim on Behalf of a User**:
  1. Obtain authorization to call the `claimFor` method (e.g., via a role granted in the contract).
  2. Ensure that you have received a valid signature from the backend for the target user.
  3. Call the `claimFor` method, specifying the `target_`, `totalAmount_`, `deadline_`, and `signature_` parameters.
  4. The reward amount will be transferred to the target address if the claim is valid.

## Prerequisites for Claiming
- A valid signature must be generated by the backend. This signature authenticates the reward entitlement and ensures the correct user is claiming the correct amount.
- The `totalAmount_` represents the cumulative reward amount that the user is eligible for over the entire period. The backend provides this value based on the userâ€™s accrued rewards.
- The `deadline_` must be a valid timestamp in the future. After the deadline, the claim cannot be processed.
- Ensure that you interact with the correct version of the `GaugeRewarder` contract, as specified by the backend.

## Example: How to Claim
Assuming the user has received the signature from the backend, the following example outlines how to claim rewards using Ethers.js in JavaScript:

```js
async function claimRewards(user, contractAddress, totalAmount, deadline, signature) {
  const gaugeRewarder = new ethers.Contract(contractAddress, GaugeRewarder_ABI, user);

  // Call the claim function to request rewards
  try {
    const tx = await gaugeRewarder.claim(totalAmount, deadline, signature);
    console.log("Claim transaction sent:", tx.hash);
    await tx.wait();
    console.log("Claim successful!");
  } catch (error) {
    console.error("Failed to claim rewards:", error);
  }
}
```

In the example above:
- **user**: This should be the wallet instance connected to the user's private key.
- **contractAddress**: The deployed address of the `GaugeRewarder` contract.
- **totalAmount**: The total reward amount the user is eligible for (received from the backend).
- **deadline**: The Unix timestamp before which the claim must be made.
- **signature**: The signature generated by the backend.

### Important Considerations
- **Gas Fees**: Users are responsible for paying the gas fees when calling the `claim` method.
- **Expired Claims**: Ensure that the claim is made before the `deadline_` to prevent rejection.
- **Role Requirements**: For the `claimFor` method, the caller must be authorized to make claims on behalf of users.

## Summary
- Users can claim their rewards directly using the `claim` function with a valid backend-provided signature.
- Authorized accounts can claim rewards on behalf of users using the `claimFor` function.
- Ensure the correct `totalAmount_` and `deadline_` are provided along with the valid signature to successfully claim rewards.
